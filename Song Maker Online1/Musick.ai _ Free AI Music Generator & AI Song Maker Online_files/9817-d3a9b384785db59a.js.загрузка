"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9817],{59817:function(e,r,a){a.d(r,{AudioPlayerProvider:function(){return p},R:function(){return m}});var t=a(57437),i=a(2265),o=a(29),n=a.n(o),s=a(85645);a(42536);var l=a(59035),u=a(60007),d=e=>{let{audioUrl:r,input_title:a,image_url:o,user_name:d,currentTime:c,duration:p,onClose:m,isPlaying:x,setIsPlaying:h,onTimeUpdate:f,onLoadedData:v,audioRef:g}=e;return(0,i.useEffect)(()=>{var e;let r=null===(e=g.current)||void 0===e?void 0:e.audio.current;if(r){if(r.pause(),r.currentTime=c,x){let e=r.play();void 0!==e&&e.catch(e=>{console.error("Playback failed:",e),h(!1)})}return()=>{r&&r.pause()}}},[r,g]),(0,t.jsxs)("div",{className:"jsx-377021159046394a fixed bottom-0 left-0 right-0 bg-[#313030] h-[80px] max-[540px]:h-[100px] z-50",children:[(0,t.jsxs)("div",{className:"jsx-377021159046394a flex items-center justify-between h-full px-4",children:[(0,t.jsx)("button",{onClick:m,className:"jsx-377021159046394a absolute top-2 right-2 text-white hover:text-gray-300 max-[540px]:top-4 max-[440px]:top-3",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-377021159046394a h-6 w-6 max-[440px]:h-5 max-[440px]:w-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12",className:"jsx-377021159046394a"})})}),(0,t.jsxs)("div",{className:"jsx-377021159046394a flex-1 relative max-w-5xl mx-auto max-[1024px]:pr-6",children:[(0,t.jsxs)("div",{className:"jsx-377021159046394a absolute bottom-0 flex items-center w-[20%] ml-2 md:ml-0",children:[(0,t.jsx)("img",{src:o,alt:a,loading:"lazy",className:"jsx-377021159046394a w-[48px] h-[48px] object-cover max-[440px]:w-[54px] max-[440px]:h-[54px]"}),(0,t.jsxs)("div",{className:"jsx-377021159046394a ml-5 flex flex-col justify-center max-[540px]:w-[120px] max-[1024px]:ml-3 max-[1024px]:mb-2 max-[440px]:pb-4",children:[(0,t.jsx)("h3",{className:"jsx-377021159046394a text-white text-xs md:text-sm xl:text-base font-semibold hover:underline cursor-pointer truncate",children:a}),(0,t.jsx)("p",{className:"jsx-377021159046394a text-gray-400 text-xs xl:text-sm truncate",children:d})]})]}),(0,t.jsx)(s.Z,{ref:g,src:r,onPlay:()=>h(!0),onPause:()=>h(!1),onLoadedData:()=>{var e;(null===(e=g.current)||void 0===e?void 0:e.audio.current)&&v(g.current.audio.current.duration)},onListen:()=>{var e;(null===(e=g.current)||void 0===e?void 0:e.audio.current)&&f(g.current.audio.current.currentTime)},listenInterval:1e3,showSkipControls:!1,showJumpControls:!0,autoPlayAfterSrcChange:!1,autoPlay:!1,defaultCurrentTime:c,layout:"stacked",customProgressBarSection:[s.s.CURRENT_TIME,s.s.PROGRESS_BAR,s.s.DURATION],customControlsSection:[s.s.MAIN_CONTROLS,s.s.VOLUME_CONTROLS],onClickPrevious:()=>{var e;(null===(e=g.current)||void 0===e?void 0:e.audio.current)&&(g.current.audio.current.currentTime-=15)},onClickNext:()=>{var e;(null===(e=g.current)||void 0===e?void 0:e.audio.current)&&(g.current.audio.current.currentTime+=15)},progressUpdateInterval:100,progressJumpStep:15e3,customIcons:{play:(0,t.jsx)(l.Z,{}),pause:(0,t.jsx)(u.Z,{}),forward:(0,t.jsx)("div",{className:"jsx-377021159046394a group relative ml-2",children:(0,t.jsxs)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2977",width:"20",height:"20",fill:"white",className:"jsx-377021159046394a",children:[(0,t.jsx)("path",{d:"M365.372247 704.941286V423.870628l-71.675578 61.436209v-68.398979l71.675578-61.43621h63.893658v349.469638zM722.21423 679.445259A105.567886 105.567886 0 0 1 645.111787 707.910703a109.663634 109.663634 0 0 1-78.228773-27.953476c-21.605067-21.707461-26.519964-47.203488-28.465444-72.801908h63.893658c3.378992 27.748688 16.178202 43.312528 42.800559 43.312528a40.957473 40.957473 0 0 0 30.718105-11.365699c11.365699-11.263305 13.823147-30.001349 13.823147-52.118384 0-40.240717-11.877667-62.869721-42.800559-62.869721A40.957473 40.957473 0 0 0 604.154314 552.989061h-58.364399V355.062073h199.565287v57.442856H604.154314v75.259357a80.07186 80.07186 0 0 1 52.220778-17.714107 90.10644 90.10644 0 0 1 65.327169 23.550547c27.543901 27.543901 31.537254 60.514666 31.537255 93.383038 0 39.319174-5.734046 66.863075-31.025286 92.461495z","p-id":"2978",className:"jsx-377021159046394a"}),(0,t.jsx)("path",{d:"M512 30.781282a492.104037 492.104037 0 0 1 231.409722 58.057217l-20.478736-35.735395a35.223427 35.223427 0 0 1 61.436209-35.32582l70.549247 122.872419a35.121033 35.121033 0 0 1-12.696817 48.12503l-122.565237 70.651641a35.32582 35.32582 0 1 1-35.325821-61.436209L727.026733 173.518075A409.574729 409.574729 0 1 0 921.574729 522.270957a40.957473 40.957473 0 0 1 81.914946 0A491.489675 491.489675 0 1 1 512 30.781282z","p-id":"2979",className:"jsx-377021159046394a"})]})}),rewind:(0,t.jsx)("div",{className:"jsx-377021159046394a group relative",children:(0,t.jsxs)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"45961",width:"20",height:"20",fill:"white",className:"jsx-377021159046394a",children:[(0,t.jsx)("path",{d:"M342.127879 704.939404V423.867087l-71.676001 61.436572v-68.399383l71.676001-61.436572h63.894035v349.4717zM698.869573 679.443226a105.568509 105.568509 0 0 1-77.102898 28.465612 109.664281 109.664281 0 0 1-78.229235-27.95364c-21.605194-21.707589-26.52012-47.203766-28.465611-72.802338h63.894034c3.481406 27.544063 16.178297 43.312783 42.800812 43.312783a40.957715 40.957715 0 0 0 30.718286-11.365766c11.058583-11.263372 13.106469-30.001526 13.106469-52.118691 0-40.240955-11.877737-62.870092-42.800812-62.870092A40.957715 40.957715 0 0 0 580.911355 552.986283H522.239429V355.058127h199.771252v57.443195H580.399383v75.2598a80.277121 80.277121 0 0 1 52.630664-17.714211 90.516549 90.516549 0 0 1 65.429949 23.550685c27.441669 27.544063 31.435046 60.515023 31.435045 93.38359 0 39.319406-5.426897 66.863469-31.025468 92.46204z","p-id":"45962",className:"jsx-377021159046394a"}),(0,t.jsx)("path",{d:"M512 30.775422a492.10694 492.10694 0 0 0-231.411087 58.05756l20.478857-35.735606a35.223635 35.223635 0 0 0-61.436572-35.326028l-70.549663 122.873143a35.12124 35.12124 0 0 0 12.696891 48.125315l122.05399 70.754452a35.326029 35.326029 0 1 0 35.326029-61.436572L296.971999 173.513057A409.577146 409.577146 0 1 1 102.422854 522.267997a40.957715 40.957715 0 0 0-81.915429 0A491.492575 491.492575 0 1 0 512 30.775422z","p-id":"45963",className:"jsx-377021159046394a"})]})})}})]})]}),(0,t.jsx)(n(),{id:"377021159046394a",children:".rhap_container{background:transparent;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;padding:0;padding-left:2px;padding-right:2px;margin:0}@media(max-width:540px){.rhap_container{padding-top:8px}}.rhap_main{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.rhap_controls-section{position:relative;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin:0}@media(max-width:540px){.rhap_controls-section{margin-top:4px}}.rhap_stacked .rhap_controls-section{margin-top:0}.rhap_main-controls{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:4rem}@media(min-width:768px){.rhap_main-controls{margin-left:9rem}}@media(max-width:540px){.rhap_main-controls{margin-left:7rem;gap:2px}}@media(max-width:360px){.rhap_main-controls{margin-left:6.5rem}}@media(max-width:344px){.rhap_main-controls{margin-left:5.5rem}}.rhap_main-controls-button{color:#fff;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.rhap_play-pause-button{font-size:28px;width:28px;height:28px}@media(max-width:440px){.rhap_play-pause-button{font-size:24px;width:24px;height:24px}}.rhap_main-controls-button:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}.rhap_time{color:#a7a7a7;font-size:11px;font-weight:400}@media(max-width:440px){.rhap_time{font-size:10px}}.rhap_progress-section{margin:0;padding-bottom:12px}@media(max-width:540px){.rhap_progress-section{padding-bottom:16px}}@media(max-width:440px){.rhap_progress-section{padding-bottom:30px;margin:0 4px}}.rhap_progress-container{margin:0 10px}@media(max-width:440px){.rhap_progress-container{margin:0 6px}}.rhap_progress-bar{height:4px;background:#4f4f4f}.rhap_progress-filled{background:#fff}.rhap_progress-bar-show-download{background:#4f4f4f}.rhap_progress-indicator{width:12px;height:12px;top:-4px;background:#fff;opacity:0;-webkit-transition:opacity.2s ease;-moz-transition:opacity.2s ease;-o-transition:opacity.2s ease;transition:opacity.2s ease}.rhap_progress-section:hover .rhap_progress-indicator{opacity:1}.rhap_volume-controls{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-flex:0;-webkit-flex:0;-moz-box-flex:0;-ms-flex:0;flex:0;margin-right:8px}@media(max-width:440px){.rhap_volume-controls{margin-right:4px}}.rhap_volume-button{color:#fff;margin-right:8px}.rhap_volume-container{margin:0}@media(max-width:440px){.rhap_volume-container{width:90px}}.rhap_volume-bar{width:93px;height:4px;background:#4f4f4f}@media(max-width:440px){.rhap_volume-bar{width:80px}}@media(max-width:360px){.rhap_volume-bar{width:75px}}.rhap_volume-indicator{width:12px;height:12px;top:-4px;background:#fff;-webkit-transition:opacity.2s ease;-moz-transition:opacity.2s ease;-o-transition:opacity.2s ease;transition:opacity.2s ease}.rhap_volume-bar-fill{background:#fff}"})]})};let c=(0,i.createContext)(void 0),p=e=>{let{children:r}=e,[a,o]=(0,i.useState)({audioUrl:"",input_title:"",image_url:"",user_name:"",currentTime:0,duration:0}),[n,s]=(0,i.useState)(!1),[l,u]=(0,i.useState)(!1),p=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e,r;if(window.performance.navigation&&1===window.performance.navigation.type||window.performance.getEntriesByType("navigation").some(e=>"reload"===e.type)){o({audioUrl:"",input_title:"",image_url:"",user_name:"",currentTime:0,duration:0}),s(!1),u(!1),(null===(e=p.current)||void 0===e?void 0:e.audio.current)&&(p.current.audio.current.pause(),p.current.audio.current.currentTime=0),sessionStorage.removeItem("audioPlayerState");return}let a=sessionStorage.getItem("audioPlayerState");if(a)try{let{track:e,isPlaying:t,isVisible:i}=JSON.parse(a);(null==e?void 0:e.audioUrl)&&(o(e),s(i),(null===(r=p.current)||void 0===r?void 0:r.audio.current)&&(p.current.audio.current.currentTime=e.currentTime)),t&&queueMicrotask(()=>{var e;if(null===(e=p.current)||void 0===e?void 0:e.audio.current){let e=p.current.audio.current.play();e&&e.then(()=>{u(!0)}).catch(()=>{u(!1)})}})}catch(e){console.error("Error restoring auido state:",e)}},[]),(0,i.useEffect)(()=>{let e=()=>{var e,r;if((null===(e=p.current)||void 0===e?void 0:e.audio.current)&&l){let e=null===(r=p.current)||void 0===r?void 0:r.audio.current.currentTime;o(r=>({...r,currentTime:e}))}};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[l]);let m=e=>{o(r=>({...r,currentTime:e}))},x=e=>{o(r=>({...r,duration:e}))},h=()=>{var e;(null===(e=p.current)||void 0===e?void 0:e.audio.current)&&p.current.audio.current.pause(),s(!1),u(!1),sessionStorage.setItem("audioPlayerState",JSON.stringify({track:a,isPlaying:!1,isVisible:!1,wasManuallyClosed:!0}))};return(0,i.useEffect)(()=>{let e=()=>{if(n&&a.audioUrl){var e,r;let t={track:{...a,currentTime:(null===(r=p.current)||void 0===r?void 0:null===(e=r.audio.current)||void 0===e?void 0:e.currentTime)||a.currentTime},isPlaying:l,isVisible:!0,wasManuallyClosed:!1};sessionStorage.setItem("audioPlayerState",JSON.stringify(t))}};return e(),window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a,l,n]),(0,t.jsxs)(c.Provider,{value:{currentTrack:a,setCurrentTrack:o,isPlayerVisible:n,setIsPlayerVisible:s,isPlaying:l,setIsPlaying:u,handlePlayAudio:(e,r,t,i)=>{let n=sessionStorage.getItem("audioPlayerState"),l=!!n&&JSON.parse(n).wasManuallyClosed;if(l){var d;o({audioUrl:e,input_title:r,image_url:i,user_name:t,currentTime:0,duration:0}),(null===(d=p.current)||void 0===d?void 0:d.audio.current)&&(p.current.audio.current.currentTime=0),s(!0),u(!0)}else a.audioUrl===e||o({audioUrl:e,input_title:r,image_url:i,user_name:t,currentTime:0,duration:0}),s(!0),u(!0);sessionStorage.setItem("audioPlayerState",JSON.stringify({track:{audioUrl:e,input_title:r,image_url:i,user_name:t,currentTime:l?0:a.audioUrl===e?a.currentTime:0,duration:a.duration},isPlaying:!0,isVisible:!0,wasManuallyClosed:!1}))},handleTimeUpdate:m,handleLoadedData:x,handleClosePlayer:h,audioRef:p},children:[r,n&&a.audioUrl&&(0,t.jsx)(d,{audioUrl:a.audioUrl,input_title:a.input_title,image_url:a.image_url,user_name:a.user_name,currentTime:a.currentTime,duration:a.duration,onClose:h,isPlaying:l,setIsPlaying:u,onTimeUpdate:m,onLoadedData:x,audioRef:p})]})},m=()=>(0,i.useContext)(c)}}]);