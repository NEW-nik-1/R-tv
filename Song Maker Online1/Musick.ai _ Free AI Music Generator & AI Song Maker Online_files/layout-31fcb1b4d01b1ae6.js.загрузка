(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1203],{46788:function(e,t,i){Promise.resolve().then(i.t.bind(i,88003,23)),Promise.resolve().then(i.t.bind(i,45488,23)),Promise.resolve().then(i.t.bind(i,49631,23)),Promise.resolve().then(i.t.bind(i,77556,23)),Promise.resolve().then(i.bind(i,44376)),Promise.resolve().then(i.bind(i,59817)),Promise.resolve().then(i.bind(i,39510))},44376:function(e,t,i){"use strict";i.d(t,{AppContextProvider:function(){return d}});var s=i(57437),r=i(86410),u=i(56446),a=i(65278),n=i(3118),o=i(2265);let l=(0,o.createContext)(void 0),c=e=>{let{children:t}=e,{userData:i}=(0,r.S)(),{setShowLoginModal:n}=(0,u.M)(),{checkUserSubscription:c}=(0,a.J)();return(0,o.useEffect)(()=>((null==i?void 0:i.user_id)&&n(!1),(null==i?void 0:i.user_id)&&c(i.user_id),()=>{}),[null==i?void 0:i.user_id]),(0,s.jsx)(l.Provider,{value:{},children:t})},d=e=>{let{children:t,commonText:i,authText:o,menuText:l,pricingText:d,footerLink:m,indexText:f}=e;return(0,s.jsx)(n._,{commonText:i,authText:o,menuText:l,pricingText:d,footerLink:m,indexText:f,children:(0,s.jsx)(r.d,{children:(0,s.jsx)(u.J,{children:(0,s.jsx)(a.O,{children:(0,s.jsx)(c,{children:t})})})})})}},3118:function(e,t,i){"use strict";i.d(t,{D:function(){return n},_:function(){return a}});var s=i(57437),r=i(2265);let u=(0,r.createContext)(void 0),a=e=>{let{children:t,commonText:i,authText:r,menuText:a,pricingText:n,footerLink:o,indexText:l}=e;return(0,s.jsx)(u.Provider,{value:{commonText:i,authText:r,menuText:a,pricingText:n,footerLink:o,indexText:l},children:t})},n=()=>{let e=(0,r.useContext)(u);if(void 0===e)throw Error("useLocalizationContext must be used within a LocalizationProvider");return e}},39510:function(e,t,i){"use strict";i.d(t,{NextAuthProvider:function(){return u}});var s=i(57437),r=i(80605);function u(e){let{children:t}=e;return(0,s.jsx)(r.SessionProvider,{children:t})}},65278:function(e,t,i){"use strict";i.d(t,{J:function(){return o},O:function(){return n}});var s=i(57437),r=i(2265),u=i(86410);let a=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,{userData:i,setUserData:n}=(0,u.S)(),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),m=async e=>{if(e)try{let e=await fetch("/api/paddle/checkSubscribe"),d=await e.json();if(0==d.status){var t,s,r,u,a,o,c;(null===(t=d.checkResult)||void 0===t?void 0:t.subscribe_status)?(localStorage.setItem("subscribe_status","true"),l(!0),n({...i,subscribeStatus:!0,is_yearly:null===(s=d.checkResult)||void 0===s?void 0:s.is_yearly,price_id:null===(r=d.checkResult)||void 0===r?void 0:r.price_id,is_unlimited:null===(u=d.checkResult)||void 0===u?void 0:u.is_unlimited})):(null==i?void 0:i.paddle_customer_id)?(localStorage.setItem("subscribe_status","true"),l(!0),n({...i,subscribeStatus:!0,is_yearly:null===(a=d.checkResult)||void 0===a?void 0:a.is_yearly,price_id:null===(o=d.checkResult)||void 0===o?void 0:o.price_id,is_unlimited:null===(c=d.checkResult)||void 0===c?void 0:c.is_unlimited})):localStorage.removeItem("subscribe_status")}}catch(e){console.error("checkUserSubscription error:",e)}};return(0,s.jsx)(a.Provider,{value:{showManageBilling:o,setShowManageBilling:l,showPayModal:c,setShowPayModal:d,checkUserSubscription:m},children:t})},o=()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("usePaymentContext must be used within a PaymentProvider");return e}},56446:function(e,t,i){"use strict";i.d(t,{J:function(){return n},M:function(){return o}});var s=i(57437),r=i(2265),u=i(72842);let a=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[i,n]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[_,v]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(!1),[g,T]=(0,r.useState)(!1),[S,y]=(0,r.useState)(""),[w,P]=(0,r.useState)(!1);return((e,t)=>{let i=(0,r.useRef)(!0);(0,r.useEffect)(()=>(i.current=!1,e()),t)})(()=>(v((0,u.tq)(navigator.userAgent)),()=>{}),[]),(0,s.jsx)(a.Provider,{value:{showLoginModal:i,setShowLoginModal:n,showLogoutModal:o,setShowLogoutModal:l,showLoadingModal:c,setShowLoadingModal:d,showGeneratingModal:m,setShowGeneratingModal:f,mobile:_,toastText:x,setToastText:h,showToastModal:p,setShowToastModal:b,showDeleteModal:g,setShowDeleteModal:T,deleteUid:S,setDeleteUid:y,showRejectModal:w,setShowRejectModal:P},children:t})},o=()=>{let e=(0,r.useContext)(a);if(void 0===e)throw Error("useUIContext must be used within a UIProvider");return e}},86410:function(e,t,i){"use strict";i.d(t,{S:function(){return c},d:function(){return l}});var s=i(57437),r=i(2265),u=i(80605),a=i(23372),n=i(85595);let o=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,{data:i,status:l}=(0,u.useSession)(),[c,d]=(0,r.useState)({}),[m,f]=(0,r.useState)(1e3),[_,v]=(0,r.useState)(void 0),[x,h]=(0,r.useState)(void 0),[p,b]=(0,r.useState)(void 0),[g,T]=(0,r.useState)(void 0);async function S(){if("authenticated"===l&&(null==i?void 0:i.user))try{let e={name:i.user.name||"",email:i.user.email||"",image:i.user.image||"",user_id:i.user.user_id,available_times:i.user.available_times,download_times:i.user.download_times,stripe_customer_id:i.user.stripe_customer_id,paddle_customer_id:i.user.paddle_customer_id,role:i.user.role,utm_campaign:i.user.utm_campaign,subscribeStatus:!1,is_yearly:!1,price_id:"",is_unlimited:!1};d(e),f(void 0),e.email&&await y(e.email)}catch(e){console.error("初始化用户数据失败:",e)}}(0,a.Z)(()=>{S()},m),(0,a.Z)(()=>{w()},_);let y=async e=>{let t=localStorage.getItem("login_from"),i=localStorage.getItem("utm_source"),s=localStorage.getItem("utm_term"),r=localStorage.getItem("utm_campaign"),u=localStorage.getItem("url_search_params");if(t||i||s||r||u){let a=await fetch("/api/user/getUserByEmail",{method:"POST",body:JSON.stringify({email:e,login_from:t,utm_campaign:r,utm_term:s,utm_source:i,url_search_params:u})});if(200!=a.status)return;await a.json()}},w=async()=>{if(_)try{let e=await fetch("/api/user/getAvailableTimesV2");if(!e.ok)return;let t=await e.json();void 0!==t.available_times&&(d(e=>({...e,available_times:t.available_times,download_times:t.download_times})),v(void 0))}catch(e){console.error("获取可用次数失败:",e)}};(0,r.useEffect)(()=>{I(),P(),x&&R(x)},[x]);let P=async()=>{let e=await n.ZP.load();h((await e.get()).visitorId)},[k,O]=(0,r.useState)(!0),[j,C]=(0,r.useState)(!1),[Q,E]=(0,r.useState)(!0),I=async()=>{let e=await fetch("/api/system/status"),t=await e.json();O("ok"===t.status),C("1"===t.high_request),E("1"===t.high_request_pay)},R=async e=>{let t=await fetch("/api/user/getFreeTimes?fingerprint=".concat(e)),i=await t.json();200==i.status&&(b(i.freeTimes),T(void 0))};return(0,a.Z)(()=>{R(x)},g),(0,s.jsx)(o.Provider,{value:{userData:c,setUserData:d,fetchUserByEmail:y,setIntervalAvailableTimes:v,fingerprint:x,systemStatus:k,highRequest:j,highRequestPayUser:Q,freeTimes:p,setIntervalFreeTimes:T},children:t})},c=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e}},72842:function(e,t,i){"use strict";i.d(t,{HR:function(){return u},SB:function(){return r},mG:function(){return s},tq:function(){return a}});let s=(e,t,i)=>{let s=null==t?void 0:t.toLowerCase();return -1!=s.indexOf("your credits have been refunded.")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("suno")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("free")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("openai")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("error")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("timeout")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("jobs")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("token")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("available")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("socket")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("feed")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("jwt")&&(e.status=9,t=i.musicQueueTipText),t&&/[\u4e00-\u9fa5]/.test(t)&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("unauthorized")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("proxy")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("invalid")&&(e.status=9,t=i.musicQueueTipText),-1!=s.indexOf("create task")&&(e.status=9,t=i.musicQueueTipText),{statusResult:e.status,errorTextResult:t}},r=e=>!!/Mobile|Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),u=e=>{let t="";if(null==e?void 0:e.output_data){let i=JSON.parse(e.output_data);400==i.code&&(t=(t=(t=(t="Music generate failed: "+i.msg).replace(/Tags/g,"")).replace(/Prompt/g,"")).replace(/Song Description/g,"")),(null==i?void 0:i.success)!=void 0&&(null==i?void 0:i.success)==!1&&(t=(t=(t=(t="Music generate failed: "+i.error.message).replace(/Tags/g,"")).replace(/Prompt/g,"")).replace(/Song Description/g,""));let{statusResult:r,errorTextResult:u}=s(e,t,{musicQueueTipText:"This task failed. Your credit have been refunded. Please try again."});e.status=r,t=u}return{statusResult:e.status,errorTextResult:t}},a=e=>!!/Mobile|Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e)},77556:function(){},49631:function(e){e.exports={style:{fontFamily:"'__Architects_Daughter_fde0d3', '__Architects_Daughter_Fallback_fde0d3'",fontWeight:400,fontStyle:"normal"},className:"__className_fde0d3",variable:"__variable_fde0d3"}},45488:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},59035:function(e,t,i){"use strict";var s=i(2265);let r=s.forwardRef(function(e,t){let{title:i,titleId:r,...u}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},u),i?s.createElement("title",{id:r},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});t.Z=r}},function(e){e.O(0,[6024,8400,7259,1210,8003,4388,9817,2971,2117,1744],function(){return e(e.s=46788)}),_N_E=e.O()}]);