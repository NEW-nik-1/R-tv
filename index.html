<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>IPTV, –†–∞–¥–∏–æ –∏ –ò–≥—Ä—ã</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    background-image: url('https://your-image-url-here.jpg');
    background-repeat: repeat;
    font-family: Arial, sans-serif;
    color: #ccc;
    background-size: auto;
  }
  body {
    display: flex; flex-direction: column; align-items: center;
  }
  header {
    background: linear-gradient(0deg,#000,#444);
    width: 100%; display: flex; justify-content: center; gap: 15px;
    padding: 10px 0;
    position: relative;
  }
  button {
    background: linear-gradient(135deg,#222,#555);
    border: 1px solid #777;
    border-radius: 5px;
    color: #ccc;
    font-weight: bold;
    font-size: 14px;
    padding: 8px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  button:hover {
    background: linear-gradient(135deg,#444,#888);
    color: white;
  }
  button.active {
    background: linear-gradient(135deg,#999999,#bbbbbb);
    color: #222;
    font-weight: bold;
  }
  button.recording {
    background-color: red !important;
    color: white !important;
  }
  main {
    flex: 1 1 auto;
    width: 100%;
    max-width: 900px;
    display: flex;
    justify-content: center;
    margin-top: 8px;
    position: relative;
  }
  #tv-container, #radio-container, #games-container {
    width: 100%;
    max-width: 900px;
    display: none;
    flex-direction: column;
    align-items: center;
  }
  #tv-container.active, #radio-container.active, #games-container.active {
    display: flex;
  }
  /* –í–∏–¥–µ–æ –ø–ª–µ–µ—Ä */
  #video-player {
    width: 720px;
    height: 405px; /* 16:9 */
    background: black;
    outline: none;
  }
  #tv-channels-list {
    margin-top: 4px;
    max-height: 240px;
    width: 720px;
    overflow-y: auto;
    color: #ccc;
    background: linear-gradient(0deg,#222,#444);
    border-radius: 5px;
  }
  #tv-channels-list .channel {
    padding: 4px 8px;
    cursor: pointer;
    user-select: none;
    border-bottom: 1px solid #555;
    text-align: center;
  }
  #tv-channels-list .channel:hover {
    background-color: #666;
    color: white;
  }
  #tv-channels-list .channel.active {
    background-color: #999999;
    color: #222;
    font-weight: bold;
  }
  #tv-channels-list .section-title {
    position: sticky;
    top: 0;
    text-align: center;
    font-weight: bold;
    border: 2px solid #ccc;
    background-color: #000;
    color: #ccc;
    padding: 6px 0;
    user-select: none;
  }
  #tv-channels-list .section-title svg {
    vertical-align: middle;
    height: 16px;
    width: 16px;
  }
  /* –†–∞–¥–∏–æ –ø–ª–µ–µ—Ä */
  #radio-player {
    width: 720px;
    margin-top: 4px;
    outline: none;
  }
  #radio-channels-list {
    margin-top: 4px;
    max-height: 300px;
    width: 720px;
    overflow-y: auto;
    background: linear-gradient(0deg,#222,#444);
    border-radius: 5px;
    color: #ccc;
  }
  #radio-channels-list .radio-channel {
    padding: 6px 8px;
    cursor: pointer;
    user-select: none;
    border-bottom: 1px solid #555;
    text-align: center;
  }
  #radio-channels-list .radio-channel:hover {
    background-color: #666;
    color: white;
  }
  #radio-channels-list .radio-channel.active {
    background-color: #999999;
    color: #222;
    font-weight: bold;
  }
  /* –ò–≥—Ä—ã */
  #games-container {
    position: fixed;
    top: 70px;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 800px;
    max-height: calc(100vh - 80px);
    background: linear-gradient(0deg,#111,#333);
    border-radius: 10px;
    box-shadow: 0 0 15px 5px rgba(0,0,0,0.7);
    flex-direction: column;
    z-index: 1100;
  }
  #games-list {
    overflow-y: auto;
    flex: 1;
    padding: 10px 0;
  }
  #games-list .game-item {
    text-align: center;
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #555;
    color: #ccc;
    user-select: none;
    font-weight: 500;
  }
  #games-list .game-item:hover {
    background-color: #666;
    color: white;
  }
  #games-close {
    align-self: flex-end;
    cursor: pointer;
    padding: 8px 10px;
    font-size: 24px;
    user-select: none;
    color: #ccc;
    border: none;
    background: none;
  }
  #games-close:hover {
    color: #f55;
  }
  /* –ò–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ */
  #game-window {
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    width: 840px;
    height: 470px;
    background: #000;
    box-shadow: 0 0 15px 10px rgba(0,0,0,0.85);
    border-radius: 8px;
    z-index: 1200;
    display: none;
    flex-direction: column;
  }
  #game-window iframe {
    border: none;
    width: 100%;
    height: 100%;
    flex: 1;
  }
  #game-controls {
    display: flex;
    justify-content: flex-end;
    background: linear-gradient(0deg,#222,#444);
    padding: 6px 8px;
    gap: 8px;
  }
  #game-controls button {
    background: none;
    border: none;
    color: #ccc;
    font-size: 18px;
    cursor: pointer;
    user-select: none;
    padding: 4px 10px;
    border-radius: 4px;
    transition: background-color 0.25s ease;
  }
  #game-controls button:hover {
    background-color: #555;
    color: white;
  }
  /* Fullscreen styles */
  #game-window.fullscreen {
    top: 0; left: 0; transform: none;
    width: 100vw;
    height: 100vh;
    border-radius: 0;
  }
  /* Footer */
  footer {
    width: 100%;
    text-align: right;
    padding: 4px 12px;
    font-size: 10px;
    color: #666;
    user-select: none;
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
</head>
<body>

<header>
  <button id="btn-tv" type="button" aria-pressed="false" title="–¢–í">–¢–í</button>
  <button id="btn-radio" type="button" aria-pressed="false" title="–†–ê–î–ò–û">–†–ê–î–ò–û</button>
  <button id="btn-games" type="button" aria-pressed="false" title="–ò–ì–†–´">–ò–ì–†–´</button>
</header>

<main>
  <!-- –¢–í -->
  <section id="tv-container" aria-label="IPTV –ü–ª–µ–µ—Ä">
    <video id="video-player" playsinline controls></video>
    <div id="tv-channels-list" role="list"></div>
  </section>

  <!-- –†–∞–¥–∏–æ -->
  <section id="radio-container" aria-label="–†–∞–¥–∏–æ –ü–ª–µ–µ—Ä">
    <audio id="radio-player" controls preload="auto"></audio>
    <div id="radio-channels-list" role="list"></div>
  </section>

  <!-- –ò–≥—Ä—ã -->
  <section id="games-container" aria-label="–ú–µ–Ω—é –∏–≥—Ä">
    <button id="games-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –∏–≥—Ä">‚úñ</button>
    <div id="games-list" role="list"></div>
  </section>
</main>

<!-- –û–∫–Ω–æ –∏–≥—Ä—ã -->
<div id="game-window" role="dialog" aria-modal="true" aria-label="–ò–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ">
  <div id="game-controls" role="toolbar" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π">
    <button id="game-minimize" title="–û–ø—É—Å—Ç–∏—Ç—å –æ–∫–Ω–æ ‚ñº" aria-label="–û–ø—É—Å—Ç–∏—Ç—å –æ–∫–Ω–æ">‚ñΩ</button>
    <button id="game-restore" title="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫–Ω–æ ‚ñ≤" aria-label="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫–Ω–æ" style="display:none;">‚ñ≥</button>
    <button id="game-sound-toggle" title="–í–∫–ª/–í—ã–∫–ª –∑–≤—É–∫ ?" aria-label="–í–∫–ª/–í—ã–∫–ª –∑–≤—É–∫">?</button>
    <button id="game-fullscreen" title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω ‚ùè" aria-label="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">‚ùè</button>
    <button id="game-exit-fullscreen" title="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ ‚ùè" aria-label="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞" style="display:none;">‚ùè</button>
    <button id="game-close" title="–ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É ‚úñ" aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É">‚úñ</button>
  </div>
  <iframe id="game-iframe" src="" allowfullscreen allow="autoplay"></iframe>
</div>

<footer>–ü—Ä–æ–µ–∫—Ç —Å–¥–µ–ª–∞–Ω, –ø—Ä–∏–¥—É–º–∞–Ω ?</footer>

<script>
(() => {
  // ============================================
  // –î–∞–Ω–Ω—ã–µ IPTV –∫–∞–Ω–∞–ª–æ–≤
  // ============================================
  const tvChannels = [
    { section: "music", title: "_üéµ_  –ú–£–ó–´–ö–ê  _üéµ_" },
    { name: "RU TV", url: "https://hls-03-video.webcaramba.com/rutv/live_480/index.m3u8" },
    { name: "Ptica 1", url: "http://streamer.rtcommufa.ru:1935/ptica/ptica1/playlist.m3u8" },
    { name: "Strana FM HD", url: "http://live.stranafm.cdnvideo.ru/stranafm/stranafm_hd.sdp/playlist.m3u8" },
    { name: "TNT High", url: "http://tntmsmotr.mediacdn.ru/cdn/smotr/playlist_hdhigh.m3u8" },
    { name: "Shanson TV", url: "https://hls-shansontv.cdnvideo.ru/shansontv/shansontv-sd.smil/playlist.m3u8" },
    { name: "Chanson ABR", url: "http://chanson-video.hostingradio.ru:8080/hls/chansonabr/live.m3u8" },
    { name: "V2Beat", url: "http://de1se01.v2beat.live/playlist.m3u8" },
    { name: "Video Tour", url: "http://k4.usastreams.com/videotour/videotour/playlist.m3u8" },
    { name: "PlayTV", url: "http://connectiktv.ddns.net:5000/playtv/@playtv/chunklist.m3u8" },
    { name: "Qmusic NL", url: "https://dpp-qmusicnl-live.akamaized.net/streamx/QmusicNL.m3u8" },
    { name: "Kronehit", url: "http://bitcdn-kronehit.bitmovin.com/v2/hls/chunklist_b1628000.m3u8" },
    { name: "Company TV", url: "https://company.fluid.stream/CompanyTV/smil:Company_ALL.smil/playlist_slita.m3u8" },
    { section: "kino", title: "_ üé¨_  –ö–ò–ù–û  _üé¨_" },
    { name: "Nika TV", url: "http://live-nikatv.cdnvideo.ru/nikatv/nikatv.sdp/playlist.m3u8" },
    { name: "TV 3", url: "https://zabava-htlive.cdn.ngenix.net/hls/CH_TV3/variant.m3u8" },
    { name: "DOVERIE", url: "http://rt-mos-htlive.cdn.ngenix.net/hls/CH_R04_DOVERIE/variant.m3u8" },
    { name: "Kino24Ru", url: "https://sirius.greenhosting.ru/Kino24Ru/video.m3u8" },
    { name: "Bestseller", url: "http://195.245.99.242/Bestseler/playlist.m3u8" },
    { name: "Detectiv", url: "http://195.245.99.242/Detectiv/playlist.m3u8" },
    { name: "Prosveschenie", url: "http://cdn-01.bonus-tv.ru/prosveschenie_edge/tracks-v1a1/index.m3u8" },
    { name: "Astrakhan24", url: "https://streaming.astrakhan.ru/astrakhan24/playlist.m3u8" },
    { name: "NAT Volga HD", url: "http://tele2dvrnat01-02.cdnvideo.ru/stream/NAT_Volga/hls/1920x1080@4504/playlist.m3u8" },
    { name: "Gubernia TV", url: "http://live.guberniatv.cdnvideo.ru/guberniatv/guberniatv.sdp/playlist.m3u8" },
    { name: "Enisey TV", url: "https://hls-eniseytv.cdnvideo.ru/eniseytv/stream1/playlist.m3u8" },
    { name: "NAT Tambov HD", url: "http://tele2dvrnat01-02.cdnvideo.ru/stream/NAT_Tambov/hls/1280x720@2500/playlist.m3u8" },
    { name: "Svoe TV HD", url: "https://svoetv.mediacdn.ru/cdn/svoetv/playlist_hdhigh.m3u8" }
  ];

  // ============================================
  // –†–∞–¥–∏–æ –∫–∞–Ω–∞–ª—ã
  // ============================================
  const radioChannels = [
    { name: "–î–æ—Ä–æ–∂–Ω–æ–µ —Ä–∞–¥–∏–æ", url: "https://dorognoe.hostingradio.ru/radio" },
    { name: "–†–∞–¥–∏–æ –°–ò–¢–ò", url: "https://online2.100i6fm.ru/city" },
    { name: "–ê–≤—Ç–æ—Ä–∞–¥–∏–æ", url: "https://pub0101.101.ru/stream/air/aac/64/100" },
    { name: "–†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥", url: "https://radiorecord.hostingradio.ru/rr_main96.aacp" },
    { name: "–ù–æ–≤–æ–µ —Ä–∞–¥–∏–æ", url: "https://stream.newradio.ru/novoe96.aacp" },
    { name: "–†–µ—Ç—Ä–æ –§–ú", url: "https://retro.hostingradio.ru:8043/retro256.mp3" },
    { name: "–†–∞–¥–∏–æ Energy", url: "https://pub0202.101.ru:8443/stream/air/aac/64/99" },
    { name: "–ï–≤—Ä–æ–ø–∞ –ø–ª—é—Å", url: "https://ep256.hostingradio.ru:8052/europaplus256.mp3" },
    { name: "–ù–∞—à–µ —Ä–∞–¥–∏–æ", url: "https://nashe1.hostingradio.ru/nashe-256" },
    { name: "BEST DEEP FM", url: "https://myradio24.org/5129" },
    { name: "–†—É—Å—Å–∫–æ–µ —Ä–∞–¥–∏–æ", url: "https://rusradio.hostingradio.ru/rusradio96.aacp" },
    { name: "–ú–∞—Ä—É—Å—è –§–ú", url: "https://radio-holding.ru:9433/marusya_default" },
    { name: "–†–µ—Ç—Ä–æ –•–∏—Ç", url: "https://retro.amgradio.ru/Retro?r_bells" },
    { name: "Donat FM –®–∞–Ω—Å–æ–Ω", url: "https://c6.radioboss.fm:18096/stream" },
    { name: "–®–∞–Ω—Å–æ–Ω –†–∞–¥–∏–æ", url: "https://listen7.myradio24.com/75853" },
    { name: "Extreme Deep House Radio", url: "https://whsh4u-panel.com/proxy/yfryujzw?mp=/stream" },
    { name: "–†—É—Å—Å–∫–∞—è –í–æ–ª–Ω–∞", url: "https://ru.amgradio.ru/RuWave48?r_bells" },
    { name: "–†–∞–¥–∏–æ –°–æ–≤–µ—Ç—Å–∫–∞—è —ç—Å—Ç—Ä–∞–¥–∞", url: "https://evcast.mediacp.eu:2075/stream" },
    { name: "Retro FM", url: "https://live.retrofm.lv/retrofmlatvia" },
    { name: "–Æ–º–æ—Ä FM", url: "https://pub0302.101.ru:8443/stream/air/aac/64/102" },
    { name: "Record Megamix", url: "https://radiorecord.hostingradio.ru/mix96.aacp" },
    { name: "–†–∞–¥–∏–æ –õ—é–±–∏–º—ã–µ —Ö–∏—Ç—ã", url: "https://myradio24.org/78185" },
    { name: "–ú—É—Ä–∫–∞ FM", url: "https://murka.amgradio.ru/MurkaFM?r_bells" },
    { name: "Relax FM Chillout", url: "https://pub0302.101.ru:8000/stream/trust/mp3/128/24?" },
    { name: "Nu Euphoria Trance Radio", url: "https://radiopotok2.online/http://radio.nueuphoria.com:8000/live" },
    { name: "–ù–æ—á–Ω–æ–µ —Ç–∞–∫—Å–∏", url: "https://radiont.shansonspb.ru:1040/stream" },
    { name: "–†–æ–¥–Ω—ã–µ –ü–µ—Å–Ω–∏", url: "https://rodpesni.amgradio.ru/rp?r_bells" },
    { name: "–†–∞–¥–∏–æ –î–≤–∏–∂—É—Ö–∞", url: "https://myradio24.org/78805" },
    { name: "–î–∏—Å–∫–æ—Ç–µ–∫–∞ 80-90", url: "https://myradio24.org/dance80" },
    { name: "Remix FM", url: "https://rmx.amgradio.ru/RemixFM?r_bells" },
    { name: "–•–∏—Ç FM 90–µ", url: "https://hitfm-hit1990.hostingradio.ru/hit199096.aacp" },
    { name: "DFM –î–∏—Å–∫–∞—á 90-—ã—Ö", url: "https://dfm-disc90.hostingradio.ru/disc9096.aacp" },
    { name: "–ê–≤—Ç–æ—Ä–∞–¥–∏–æ –î–∏—Å–∫–æ—Ç–µ–∫–∞ 90-—Ö", url: "https://pub0201.101.ru/stream/pro/aac/64/74?" },
    { name: "90s Eurodance", url: "https://listen1.myradio24.com/5967" },
    { name: "PRO Dj Radio", url: "https://live.prodjradio.net:8065/radio" },
    { name: "Radio Danz", url: "https://streamssl.radiodanz.com/live" },
    { name: "–†–∞–¥–∏–æ –ö–∞–≤–∫–∞–∑-–•–∏—Ç", url: "https://kavkazhit.hostingradio.ru:8017/kavkazhit96.mp3" },
    { name: "–†–∞–¥–∏–æ –ë–æ–±–∏–Ω–∞", url: "https://bobina.su" },
    { name: "–ê–≤—Ç–æ—Ä–∞–¥–∏–æ –î–∏—Å–∫–æ—Ç–µ–∫–∞ 80-—Ö", url: "https://pub0101.101.ru/stream/pro/aac/64/1?" },
    { name: "–î–∏—Å–∫–æ—Ç–µ–∫–∞ 90-—ã—Ö", url: "https://pub0302.101.ru:8443/stream/pro/aac/64/74" },
    { name: "Russian Dance", url: "https://pub0302.101.ru:8443/stream/trust/mp3/128/17" },
    { name: "–•–∏—Ç FM –°—Ç–æ–ø—É–¥–æ–≤—ã–π –•–∏—Ç", url: "https://hitfm-hit100pud.hostingradio.ru/hit100pud96.aacp" },
    { name: "Record Russian Gold", url: "https://radiorecord.hostingradio.ru/russiangold96.aacp" },
    { name: "–°—É–ø–µ—Ä–¥–∏—Å–∫–æ—Ç–µ–∫–∞ 90-—Ö", url: "https://radiorecord.hostingradio.ru/sd9096.aacp" },
    { name: "–†—É—Å—Å–∫–∏–π —à–∞–Ω—Å–æ–Ω 24", url: "https://stream.vyshka24.ru/russhanson24" },
    { name: "–†–∞–¥–∏–æ –ö–∞–ª–∏–Ω–∞ –ö—Ä–∞—Å–Ω–∞—è", url: "https://icecast-studio21.cdnvideo.ru/KalynaK_1a" },
    { name: "–ú–∏–ª–∏—Ü–µ–π—Å–∫–∞—è –≤–æ–ª–Ω–∞", url: "https://radiomv.hostingradio.ru:80/radiomv128.mp3" },
    { name: "–î–∂–µ–º FM", url: "https://online2.jamfm.ru/jam_aacplus" },
    { name: "–†–∞–¥–∏–æ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Ä–∞–π", url: "https://listen7.myradio24.com/96203" },
    { name: "Record Eurodance", url: "https://radiorecord.hostingradio.ru/eurodance96.aacp" },
    { name: "–†–æ—Å—Å–∏—è 90-—ã—Ö", url: "https://pub0102.101.ru:8443/stream/pro/aac/64/33" },
    { name: "Sector Geny / 80s", url: "https://radiopotok2.online/http://89.223.45.5:8000/geny-160" },
    { name: "–ê–≤—Ç–æ—Ä–∞–¥–∏–æ –î–∏—Å–∫–æ—Ç–µ–∫–∞ –°–°–°–†", url: "https://pub0302.101.ru:8000/stream/pro/aac/64/144?" },
    { name: "–î–∏—Å–∫–æ-—Ä–∞–¥–∏–æ SOVA", url: "https://evcast.mediacp.eu:1965/stream" }
  ];

  // ============================================
  // –ò–≥—Ä—ã
  // ============================================
  const games = [
    { name: "Gary's World", url: "https://html5.gamemonetize.co/dd5rs8etri5hw51g32sk69qfdoov5tq2/" },
    { name: "crazy-ball-adventures", url: "https://www.onlinegames.io/games/2021/unity2/crazy-ball-adventures/index.html" },
    { name: "subway-horror-chapter", url: "https://www.gamenora.com/embed/subway-horror-chapter-1" },
    { name: "A Difficult Game About Climbing", url: "https://www.gamenora.com/embed/a-difficult-game-about-climbing" },
    { name: "cross-the-road", url: "https://www.onlinegames.io/games/2023/unity/cross-the-road/index.html" },
    { name: "motorcycle racer", url: "https://s3.eponesh.com/games/8866/" },
    { name: "Moto Rider GO", url: "https://app-165758.games.s3.yandex.net/165758/ghtg4xyuxt09og6gtji0jcl6aw8el4w4/index.html" },
    { name: "motorbike-traffic", url: "https://www.onlinegames.io/games/2021/unity/motorbike-traffic/index.html" },
    { name: "turbo-moto-racer-3d", url: "https://www.gamenora.com/splash/turbo-moto-racer-3d/" },
    { name: "atv-highway-traffic", url: "https://www.onlinegames.io/games/2021/unity/atv-highway-traffic/index.html" },
    { name: "traffic-tour", url: "https://traffictour.github.io/traffic-tour/" }
  ];

  // ==============
  // DOM Elements
  // ==============
  const btnTV = document.getElementById('btn-tv');
  const btnRadio = document.getElementById('btn-radio');
  const btnGames = document.getElementById('btn-games');

  const tvContainer = document.getElementById('tv-container');
  const videoPlayer = document.getElementById('video-player');
  const tvChannelsList = document.getElementById('tv-channels-list');

  const radioContainer = document.getElementById('radio-container');
  const radioPlayer = document.getElementById('radio-player');
  const radioChannelsList = document.getElementById('radio-channels-list');

  const gamesContainer = document.getElementById('games-container');
  const gamesList = document.getElementById('games-list');
  const gamesClose = document.getElementById('games-close');

  const gameWindow = document.getElementById('game-window');
  const gameIframe = document.getElementById('game-iframe');
  const gameControls = {
    minimize: document.getElementById('game-minimize'),
    restore: document.getElementById('game-restore'),
    soundToggle: document.getElementById('game-sound-toggle'),
    fullscreen: document.getElementById('game-fullscreen'),
    exitFullscreen: document.getElementById('game-exit-fullscreen'),
    close: document.getElementById('game-close')
  };

  // ==============
  // State variables
  // ==============
  let currentTVIndex = -1;
  let currentRadioIndex = 0;
  let hls = null;
  let recordingMediaRecorder = null;
  let recordedChunks = [];

  let gameIsMinimized = false;
  let gameSoundEnabled = true;
  let gameIsFullscreen = false;

  // ==========================
  // Helper functions
  // ==========================

  function clearActiveButtons() {
    btnTV.classList.remove('active', 'recording');
    btnRadio.classList.remove('active', 'recording');
    btnTV.setAttribute('aria-pressed', 'false');
    btnRadio.setAttribute('aria-pressed', 'false');
  }

  // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å IPTV —Å–ø–∏—Å–æ–∫ –∏ –≤–∏–¥–µ–æ
  function renderTVChannels() {
    tvChannelsList.innerHTML = '';
    tvChannels.forEach((item, i) => {
      if(item.section){
        // section title with icon and border
        const div = document.createElement('div');
        div.className = 'section-title';
        // decode symbols safely, add icons from text
        div.textContent = item.title;
        tvChannelsList.appendChild(div);
      } else {
        const div = document.createElement('div');
        div.className = 'channel';
        div.textContent = item.name;
        div.setAttribute('role','listitem');
        div.dataset.idx = i;
        tvChannelsList.appendChild(div);
      }
    });
  }

  // –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ IPTV –∫–∞–Ω–∞–ª–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É
  function playTVChannel(idx) {
    if(idx < 0 || idx >= tvChannels.length) return;
    if(tvChannels[idx].section) return; // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü–∏–π
    const channel = tvChannels[idx];
    currentTVIndex = idx;

    // –û—Ç–º–µ—á–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª
    Array.from(tvChannelsList.children).forEach(item => {
      if(!item.dataset.idx) return;
      let i = parseInt(item.dataset.idx);
      if(i === currentTVIndex) item.classList.add('active');
      else item.classList.remove('active');
    });

    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–¥–∏–æ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
    stopRadio();

    // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å HLS, –æ—á–∏—Å—Ç–∏–º
    if(hls){
      try { hls.destroy(); } catch(e){}
      hls = null;
    }

    const video = videoPlayer;
    video.pause();
    video.src = '';
    video.load();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è HLS
    if(video.canPlayType('application/vnd.apple.mpegurl')){
      // –Ω–∞—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HLS (Safari)
      video.src = channel.url;
      video.play().catch(console.warn);
    } else if(Hls.isSupported()){
      hls = new Hls();
      hls.loadSource(channel.url);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, () => video.play().catch(() => {}));
      hls.on(Hls.Events.ERROR, (event, data) => {
        console.error("HLS error", data);
      });
    } else {
      video.innerHTML = "<p>–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ HLS –≤–∏–¥–µ–æ.</p>";
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¢–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Å–∫—Ä—ã–≤–∞–µ–º —Ä–∞–¥–∏–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    tvContainer.classList.add('active');
    radioContainer.classList.remove('active');
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ä–∞–¥–∏–æ
  function renderRadioChannels() {
    radioChannelsList.innerHTML = '';
    radioChannels.forEach((item, i) => {
      const div = document.createElement('div');
      div.className = 'radio-channel';
      div.textContent = item.name;
      div.dataset.idx = i;
      div.setAttribute('role','listitem');
      radioChannelsList.appendChild(div);
    });
  }

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–¥–∏–æ –∫–∞–Ω–∞–ª–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É
  function playRadioChannel(idx) {
    if(idx < 0 || idx >= radioChannels.length) return;
    currentRadioIndex = idx;

    // –û—Ç–º–µ—Ç–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π
    Array.from(radioChannelsList.children).forEach(item => {
      if(!item.dataset.idx) return;
      const i = parseInt(item.dataset.idx);
      if(i === currentRadioIndex) item.classList.add('active');
      else item.classList.remove('active');
    });

    // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¢–í –µ—Å–ª–∏ –Ω–∞–¥–æ
    stopTV();

    // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–¥–∏–æ
    radioPlayer.src = radioChannels[currentRadioIndex].url;
    radioPlayer.play().catch(() => {});

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–¥–∏–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    radioContainer.classList.add('active');
    tvContainer.classList.remove('active');
  }

  // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¢–í –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å
  function stopTV() {
    if(hls) {
      try { hls.destroy(); } catch(e){}
      hls = null;
    }
    videoPlayer.pause();
    videoPlayer.removeAttribute('src');
    videoPlayer.load();
    currentTVIndex = -1;
    tvContainer.classList.remove('active');
    clearTVChannelSelection();
    btnTV.classList.remove('active', 'recording');
    btnTV.setAttribute('aria-pressed', 'false');
  }

  // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–¥–∏–æ –ø–ª–µ–µ—Ä
  function stopRadio() {
    radioPlayer.pause();
    radioPlayer.removeAttribute('src');
    radioPlayer.load();
    currentRadioIndex = -1;
    radioContainer.classList.remove('active');
    clearRadioChannelSelection();
    btnRadio.classList.remove('active', 'recording');
    btnRadio.setAttribute('aria-pressed', 'false');
  }

  // –û—á–∏—Å—Ç–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –¢–í
  function clearTVChannelSelection() {
    Array.from(tvChannelsList.children).forEach(item => {
      if(item.dataset.idx) item.classList.remove('active');
    });
  }

  // –û—á–∏—Å—Ç–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ä–∞–¥–∏–æ –∫–∞–Ω–∞–ª–æ–≤
  function clearRadioChannelSelection() {
    Array.from(radioChannelsList.children).forEach(item => {
      if(item.dataset.idx) item.classList.remove('active');
    });
  }

  // ==============
  // –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ –ø–ª–µ–µ—Ä–∞ (—Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø–∏—Å–∏ .webm)
  // –ö–Ω–æ–ø–∫–∞ –¢–í –¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Å–Ω–æ–π –ø—Ä–∏ –∑–∞–ø–∏—Å–∏
  // –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–ø–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
  // ==============
  function startRecording() {
    if(recordingMediaRecorder) return; // –£–∂–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º
    try {
      const stream = videoPlayer.captureStream();
      recordedChunks = [];
      recordingMediaRecorder = new MediaRecorder(stream, {mimeType: 'video/webm; codecs=vp9'});
      
      recordingMediaRecorder.ondataavailable = e => {
        if(e.data && e.data.size > 0) recordedChunks.push(e.data);
      };

      recordingMediaRecorder.onstop = () => {
        const blob = new Blob(recordedChunks, {type: 'video/webm'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `recording_${Date.now()}.webm`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        recordingMediaRecorder = null;
        btnTV.classList.remove('recording');
      };

      recordingMediaRecorder.start();
      btnTV.classList.add('recording');
    } catch(e) {
      alert('–û—à–∏–±–∫–∞: –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º.');
    }
  }
  function stopRecording() {
    if(!recordingMediaRecorder) return;
    recordingMediaRecorder.stop();
  }

  // ========================
  // Render games list
  // ========================
  function renderGames() {
    gamesList.innerHTML = '';
    games.forEach((game, i) => {
      const div = document.createElement('div');
      div.className = 'game-item';
      div.textContent = game.name;
      div.dataset.idx = i;
      div.setAttribute('role', 'listitem');
      gamesList.appendChild(div);
    });
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –∏–≥—Ä
  function showGamesScreen() {
    gamesContainer.classList.add('active');
  }
  // –°–∫—Ä—ã—Ç—å –º–µ–Ω—é –∏–≥—Ä
  function hideGamesScreen() {
    gamesContainer.classList.remove('active');
  }

  // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø–æ –∏–Ω–¥–µ–∫—Å—É
  function launchGame(idx) {
    if(idx < 0 || idx >= games.length) return;
    let game = games[idx];
    gameWindow.style.display = 'flex';
    gameWindow.classList.remove('fullscreen');
    gameIsFullscreen = false;
    gameWindow.style.top = "100px";
    gameWindow.style.left = "50%";
    gameWindow.style.transform = "translateX(-50%)";
    gameIsMinimized = false;
    updateGameControls();

    // –î–æ–±–∞–≤–∏—Ç—å src –¥–ª—è iframe
    gameIframe.src = game.url;

    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∏–≥—Ä—ã –∫–Ω–æ–ø–∫—É —Å–≤–µ—Ç–ª–µ–µ
    btnGames.classList.add('active');
    btnGames.setAttribute('aria-pressed', 'true');
    // –¢–í –∏ –†–∞–¥–∏–æ –ø–æ —É—Å–ª–æ–≤–∏—è–º –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–Ω—ã –ø–æ —Ü–µ–Ω—Ç—Ä—É –∏ TV/Radio –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –µ—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è
  }

  // –ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –∏–≥—Ä—ã
  function closeGame() {
    gameWindow.style.display = 'none';
    gameIframe.src = '';
    btnGames.classList.remove('active');
    btnGames.setAttribute('aria-pressed', 'false');
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä—ã (–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —Ñ—É–ª–ª—Å–∫—Ä–∏–Ω)
  function updateGameControls() {
    if(gameIsMinimized){
      gameControls.minimize.style.display = 'none';
      gameControls.restore.style.display = 'inline-block';
    } else {
      gameControls.minimize.style.display = 'inline-block';
      gameControls.restore.style.display = 'none';
    }
    if(gameIsFullscreen){
      gameControls.fullscreen.style.display = 'none';
      gameControls.exitFullscreen.style.display = 'inline-block';
    } else {
      gameControls.fullscreen.style.display = 'inline-block';
      gameControls.exitFullscreen.style.display = 'none';
    }
    gameControls.soundToggle.style.color = gameSoundEnabled ? '#ccc' : '#555';
  }

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º –∏–≥—Ä—ã –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, ? –≤ –∑–∞–¥–∞—á–µ - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–≥—Ä—ã, –æ—Å—Ç–∞–≤–∏–º –∏–∫–æ–Ω–∫—É –ø—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç
  function toggleGameSound() {
    gameSoundEnabled = !gameSoundEnabled;
    updateGameControls();
  }

  // –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É: –æ–ø—É—Å—Ç–∏—Ç—å –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å)
  function minimizeGame() {
    if(gameIsMinimized) return;
    gameWindow.style.top = 'auto';
    gameWindow.style.bottom = '5px';
    gameWindow.style.left = '50%';
    gameWindow.style.transform = 'translateX(-50%)';
    gameIsMinimized = true;
    updateGameControls();
  }

  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
  function restoreGame() {
    if(!gameIsMinimized) return;
    gameWindow.style.top = '100px';
    gameWindow.style.bottom = 'auto';
    gameWindow.style.left = '50%';
    gameWindow.style.transform = 'translateX(-50%)';
    gameIsMinimized = false;
    updateGameControls();
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å fullscreen –¥–ª—è –∏–≥—Ä—ã
  function enterFullscreen() {
    if(gameIsFullscreen) return;
    if(gameWindow.requestFullscreen){
      gameWindow.requestFullscreen();
    } else if(gameWindow.webkitRequestFullscreen){
      gameWindow.webkitRequestFullscreen();
    } else if(gameWindow.msRequestFullscreen){
      gameWindow.msRequestFullscreen();
    }
    // –ü—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º CSS –Ω–∞ fullscreen –∫–ª–∞—Å—Å, —Ç–∫ iframe –Ω–µ –≤—ã–π–¥–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω –±–µ–∑ user gesture, –ø–æ–ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ css
    gameWindow.classList.add('fullscreen');
    gameIsFullscreen = true;
    updateGameControls();
  }
  function exitFullscreen() {
    if(!gameIsFullscreen) return;
    if(document.exitFullscreen){
      document.exitFullscreen();
    } else if(document.webkitExitFullscreen){
      document.webkitExitFullscreen();
    } else if(document.msExitFullscreen){
      document.msExitFullscreen();
    }
    gameWindow.classList.remove('fullscreen');
    gameIsFullscreen = false;
    updateGameControls();
  }

  // ===============
  // EVENTS
  // ===============

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –ø–æ –¢–í –∫–Ω–æ–ø–∫–µ
  btnTV.addEventListener('click', () => {
    // –ï—Å–ª–∏ —É–∂–µ TV –∞–∫—Ç–∏–≤–µ–Ω - –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å
    if(btnTV.classList.contains('active')) return;
    clearActiveButtons();
    btnTV.classList.add('active');
    btnTV.setAttribute('aria-pressed', 'true');
    btnRadio.setAttribute('aria-pressed', 'false');
    btnGames.setAttribute('aria-pressed', 'false');

    // –û—Ç–∫–ª—é—á–∞–µ–º —Ä–∞–¥–∏–æ –∏ –∏–≥—Ä—ã
    stopRadio();
    hideGamesScreen();

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¢–í + –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–∞–Ω–∞–ª –µ—Å–ª–∏ –Ω–µ—Ç
    tvContainer.classList.add('active');
    radioContainer.classList.remove('active');
    gamesContainer.classList.remove('active');

    if(currentTVIndex === -1) {
      // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–∞–Ω–∞–ª
      let firstChannel = tvChannels.findIndex(ch => !!ch.url && !ch.section);
      if(firstChannel >= 0) playTVChannel(firstChannel);
    } else {
      playTVChannel(currentTVIndex);
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –ø–æ –∫–Ω–æ–ø–∫–µ –†–ê–î–ò–û
  btnRadio.addEventListener('click', () => {
    if(btnRadio.classList.contains('active')) return;
    clearActiveButtons();
    btnRadio.classList.add('active');
    btnRadio.setAttribute('aria-pressed', 'true');
    btnTV.setAttribute('aria-pressed', 'false');
    btnGames.setAttribute('aria-pressed', 'false');

    // –û—Ç–∫–ª—é—á–∞–µ–º –¢–í –∏ –∏–≥—Ä—ã
    stopTV();
    hideGamesScreen();

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–¥–∏–æ + –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π —Ä–∞–¥–∏–æ –∫–∞–Ω–∞–ª
    radioContainer.classList.add('active');
    tvContainer.classList.remove('active');
    gamesContainer.classList.remove('active');

    if(currentRadioIndex === -1) currentRadioIndex = 0;
    playRadioChannel(currentRadioIndex);
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –ò–ì–†–´
  btnGames.addEventListener('click', () => {
    // –ò–≥—Ä–∞ –∫–Ω–æ–ø–∫–∞ toggle: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º
    if(gamesContainer.classList.contains('active')) {
      hideGamesScreen();
      btnGames.classList.remove('active');
      btnGames.setAttribute('aria-pressed', 'false');
      // –û—Å—Ç–∞–≤–ª—è–µ–º –¢–í –∏–ª–∏ –†–∞–¥–∏–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–º, –Ω–µ –≤—ã–∫–ª—é—á–∞–µ–º –ø–ª–µ–µ—Ä—ã
    } else {
      // –û—Ç–º–µ—Ç–∏–º –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–Ω–æ–π:
      btnGames.classList.add('active');
      btnGames.setAttribute('aria-pressed', 'true');
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é –∏–≥—Ä –ø–æ–≤–µ—Ä—Ö –¢–í –∏ –†–∞–¥–∏–æ
      showGamesScreen();
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞ –≤ —Å–ø–∏—Å–∫–µ –¢–í
  tvChannelsList.addEventListener('click', e => {
    const el = e.target.closest('.channel');
    if(!el) return;
    const idx = parseInt(el.dataset.idx);
    if(idx === currentTVIndex) return; // –£–∂–µ –∞–∫—Ç–∏–≤–Ω—ã–π
    playTVChannel(idx);
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–∞–¥–∏–æ –∫–∞–Ω–∞–ª–∞
  radioChannelsList.addEventListener('click', e => {
    const el = e.target.closest('.radio-channel');
    if(!el) return;
    const idx = parseInt(el.dataset.idx);
    if(idx === currentRadioIndex) return; // –£–∂–µ –∞–∫—Ç–∏–≤–Ω—ã–π
    playRadioChannel(idx);
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é –∏–≥—Ä
  gamesClose.addEventListener('click', () => {
    hideGamesScreen();
    btnGames.classList.remove('active');
    btnGames.setAttribute('aria-pressed', 'false');
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä—ã –∏–∑ —Å–ø–∏—Å–∫–∞
  gamesList.addEventListener('click', e => {
    const el = e.target.closest('.game-item');
    if(!el) return;
    const idx = parseInt(el.dataset.idx);
    launchGame(idx);
  });

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º –æ–∫–Ω–æ–º (–º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –∑–≤—É–∫, –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω, –∑–∞–∫—Ä—ã—Ç—å)
  gameControls.minimize.addEventListener('click', () => {
    minimizeGame();
  });
  gameControls.restore.addEventListener('click', () => {
    restoreGame();
  });
  gameControls.soundToggle.addEventListener('click', () => {
    toggleGameSound();
  });
  gameControls.fullscreen.addEventListener('click', () => {
    enterFullscreen();
  });
  gameControls.exitFullscreen.addEventListener('click', () => {
    exitFullscreen();
  });
  gameControls.close.addEventListener('click', () => {
    closeGame();
  });

  // –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ fullscreen —Ñ–µ–Ω—à—É–π
  document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement) {
      gameWindow.classList.remove('fullscreen');
      gameIsFullscreen = false;
      updateGameControls();
    }
  });

  // ======================
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  // ======================
  // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –¢–í –∏ —Ä–∞–¥–∏–æ –∏ –∏–≥—Ä
  renderTVChannels();
  renderRadioChannels();
  renderGames();

  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞–¥–∏–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  playRadioChannel(0);
  btnRadio.classList.add('active');
  btnRadio.setAttribute('aria-pressed', 'true');

  // –í–∏–¥–µ–æ –ø–ª–µ–µ—Ä –∏ —Ä–∞–¥–∏–æ –ø–ª–µ–µ—Ä –ø–æ —É—Å–ª–æ–≤–∏—é - –Ω–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É:
  // –í–∏–¥–µ–æ –ø–ª–µ–µ—Ä –º–µ–Ω—å—à–µ, –≤—ã—Å–æ—Ç–∞ 405px (720x405)
  // –†–∞–¥–∏–æ –ø–ª–µ–µ—Ä 720px —à–∏—Ä–∏–Ω–∞

  // –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º –∫–ª–∏–∫–µ –ø–æ –∫–Ω–æ–ø–∫–µ –¢–í (–¢–µ—Å—Ç)
  // –ó–¥–µ—Å—å –ø–æ —É—Å–ª–æ–≤–∏—é —Å–¥–µ–ª–∞—Ç—å –∫–Ω–æ–ø–∫—É –∫—Ä–∞—Å–Ω–æ–π –ø—Ä–∏ –∑–∞–ø–∏—Å–∏, –∏ —Å–∫–∞—á–∞—Ç—å .webm –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
  // –î–æ–±–∞–≤–∏–º –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è —Ç–µ—Å—Ç–∞:
  btnTV.addEventListener('dblclick', () => {
    if(!recordingMediaRecorder) {
      startRecording();
    } else {
      stopRecording();
    }
  });

})();
</script>
</body>
</html>
