<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TV / Radio / Games — Радио по умолчанию с ТВ и Играми</title>
<style>
  body {
    margin: 0;
    min-height: 100vh;
    width: 100%;
    display: flex;
    flex-direction: column;
    background: #0f1724;
    color: #e6eef8;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  header {
    width: 100%;
    background: #0b1220;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    gap: 20px;
    align-items: center;
    flex-wrap: wrap;
  }
  button.tab {
    background: linear-gradient(180deg,#3a6ea5,#224566);
    border: 2px solid #1b2b3a;
    color: #fff;
    padding: 12px 24px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    box-shadow: 0 4px #142738, 0 6px 10px rgba(0,0,0,.6);
    transition: all .2s ease;
    position: relative;
    min-width: 100px;
    text-align: center;
  }
  button.tab:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px #142738, 0 8px 14px rgba(0,0,0,.6);
  }
  button.tab:active {
    transform: translateY(2px);
    box-shadow: 0 2px #142738, 0 4px 8px rgba(0,0,0,.6);
  }
  button.tab.active {
    background-color: #0b1923;
    border-color: #071018;
    color: #bfe1ff;
    box-shadow: inset 0 0 10px #071018;
  }
  main {
    flex: 1;
    padding: 18px;
    width: 100%;
    max-width: 1024px;
    margin: 0 auto;
    box-sizing: border-box;
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    justify-items: center;
  }
  #tv-iframe-container {
    display:none;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid #223246;
    width: 100%;
    max-width: 690px;
    height: 850px;
  }
  #tv-iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  #radio-player {
    display: flex;
    padding: 10px;
    background: #0b1923;
    border-radius: 10px;
    border: 1px solid #213243;
    width: 100%;
    max-width: 500px;
    max-height: 850px;
    flex-direction: column;
    overflow: hidden;
  }
  #radio-audio {
    width: 100%;
    margin-bottom: 12px;
    background: #0b1923;
    border-radius: 6px;
  }
  #channels {
    flex: 1;
    height: 850px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    scrollbar-width: thin;
    scrollbar-color: #0e2332 #071018;
  }
  #games-overlay {
    display:none;
    padding: 12px;
    background: #071018;
    border-radius: 10px;
    border: 1px solid #213243;
    width: 100%;
    max-width: 500px;
    max-height: 850px;
    overflow: hidden;
    flex-direction: column;
  }
  #games-list {
    flex: 1;
    height: 850px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    background-color: #0e2332;
    scrollbar-width: thin;
    scrollbar-color: #0e2332 #071018;
  }
  #games-list::-webkit-scrollbar,
  #channels::-webkit-scrollbar {
    width: 10px;
    background-color: #0e2332;
  }
  #games-list::-webkit-scrollbar-thumb,
  #channels::-webkit-scrollbar-thumb {
    background-color: #0e2332;
    border-radius: 8px;
    border: 2px solid #071018;
  }
  .channel {
    padding: 12px 16px;
    background: #0e2332;
    color: #e6eef8;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #153248;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    user-select: none;
    text-align: left;
  }
  .channel:hover {
    background-color: #224466;
    color: #fff;
  }
  .channel.selected {
    background-color: #2a6b9a;
    color: #fff;
    border-color: #2a6b9a;
  }
  .game-item {
    padding: 12px 16px;
    background: #0e2332;
    color: #e6eef8;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #0e2332;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    user-select: none;
    text-align: left;
  }
  .game-item:hover {
    background-color: #224466;
    color: #fff;
  }
  #game-window {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 720px;
    height: 480px;
    background: #071018;
    border: 1px solid #294050;
    border-radius: 10px;
    box-shadow: 0 12px 40px rgba(2, 7, 14, 0.7);
    overflow: hidden;
    z-index: 999;
  }
  #game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    background: linear-gradient(180deg, #0b1a24, #07202b);
    gap: 8px;
  }
  #game-title {
    font-size: 14px;
  }
  #game-controls {
    display: flex;
    gap: 6px;
  }
  .gbtn {
    background: #0e2936;
    border: 0;
    padding: 6px 8px;
    border-radius: 6px;
    cursor: pointer;
    color: #bfe1ff;
  }
  #game-iframe {
    width: 100%;
    height: calc(100% - 40px);
    border: 0;
  }
  #game-window.minimized {
    height: 42px;
    width: 260px;
    left: 0;
    bottom: 0;
    top: auto;
    transform: none;
  }
  #game-window.fullscreen {
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    border-radius: 0;
    transform: none;
  }
  #help-main-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid #1b2b3a;
    background: #224566;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.5);
    margin-left: 8px;
  }
  #help-main-btn:hover {
    background: #2f6b9c;
  }
  #help-modal {
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }
  #help-content {
    background: #0f1e2c;
    color: #fff;
    padding: 20px;
    max-width: 600px;
    border-radius: 12px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
    max-height: 80vh;
    overflow-y: auto;
  }
  #close-help {
    margin-top: 15px;
    padding: 10px 20px;
    cursor: pointer;
    background: #2a6b9a;
    color: #fff;
    border: none;
    border-radius: 8px;
  }
  footer {
    font-size: 10px;
    padding: 10px;
    color: #777;
    text-align: left;
    width: 100%;
    max-width: 1024px;
    margin: 0 0 10px 0;
    background: transparent;
  }
  @media (max-width: 768px) {
    header {
      flex-direction: column;
      gap: 12px;
      padding: 16px;
    }
    button.tab {
      padding: 10px 18px;
      font-size: 14px;
      min-width: 80px;
    }
    main {
      padding: 12px;
      max-width: 100%;
    }
    #tv-iframe-container,
    #radio-player,
    #games-overlay {
      max-width: 100%;
      width: 100%;
      height: auto;
      max-height: none;
    }
    #channels,
    #games-list {
      height: 400px;
    }
    #game-window {
      width: 95%;
      height: 400px;
    }
  }
</style>
</head>
<body>
<header>
  <button id="btn-tv" class="tab">ТВ</button>
  <button id="btn-radio" class="tab active">РАДИО</button>
  <button id="btn-games" class="tab">ИГРЫ</button>
  <button id="help-main-btn" title="Инструкция">?</button>
</header>
<main>
  <section id="tv-iframe-container" style="display:none;">
    <iframe id="tv-iframe" src="https://smotret.tv/" allowfullscreen title="Смотреть ТВ"></iframe>
  </section>
  <section id="radio-player" style="display:flex;">
    <div id="radio-controls">
      <audio id="radio-audio" controls></audio>
    </div>
    <div id="channels"></div>
  </section>
  <section id="games-overlay" style="display:none;">
    <div id="games-list"></div>
  </section>
</main>
<div id="game-window" aria-hidden="true">
  <div id="game-header">
    <div id="game-title">Игра</div>
    <div id="game-controls">
      <button id="minimize-btn" class="gbtn">▽</button>
      <button id="restore-btn" class="gbtn" style="display:none">△</button>
      <button id="fs-enter" class="gbtn">❏</button>
      <button id="fs-exit" class="gbtn" style="display:none">❏ (windowed)</button>
      <button id="help-btn" class="gbtn" title="Звук игры отключается в настройках игры">?</button>
      <button id="close-game-btn" class="gbtn">✖</button>
    </div>
  </div>
  <iframe id="game-iframe" src="" title="Game iframe"></iframe>
</div>
<div id="help-modal" style="display:none;">
  <div id="help-content">
    <h2>Инструкция к интерфейсу ТВ/РАДИО/ИГРЫ</h2>
    <h3>Основные кнопки вкладок в шапке:</h3>
    <ul>
      <li><b>ТВ</b> — переключает интерфейс в режим просмотра телевизионных каналов.</li>
      <li><b>РАДИО</b> — переключает интерфейс в режим прослушивания радио с доступными станциями.</li>
      <li><b>ИГРЫ</b> — переключает интерфейс для выбора и запуска онлайн-игр из списка.</li>
    </ul>
    <h3>Кнопки управления радиоплеером:</h3>
    <ul>
      <li>В списке радиостанций выбирайте нужную станцию кнопкой.</li>
      <li>Кнопка воспроизведения / паузы на аудиоплеере — запускает или останавливает поток.</li>
      <li>Радиоплеер показывает выбранный поток и позволяет управлять громкостью.</li>
    </ul>
    <h3>Кнопки управления окном игры:</h3>
    <ul>
      <li><b>▽ (Свернуть)</b> — сворачивает окно игры в компактный вид.</li>
      <li><b>△ (Восстановить)</b> — возвращает окно в нормальный размер.</li>
      <li><b>❏ (Полноэкранный режим)</b> — разворачивает игру на весь экран.</li>
      <li><b>❏ (Выход из полноэкранного режима)</b> — возвращает окно игры в оконный режим.</li>
      <li><b>?</b> (Справка) — показывает справочное сообщение (звука в игре может не быть).</li>
      <li><b>✖ (Закрыть игру)</b> — полностью закрывает окно игры.</li>
    </ul>
    <h3>Горячие клавиши:</h3>
    <ul>
      <li><b>1</b> — переключение на вкладку ТВ.</li>
      <li><b>2</b> — переключение на вкладку РАДИО.</li>
      <li><b>3</b> — переключение на вкладку ИГРЫ.</li>
      <li><b>Escape</b> — закрывает окно игры или справку, если они открыты.</li>
    </ul>
    <h3>Дополнительные пояснения:</h3>
    <ul>
      <li>При выборе радиостанции цвет кнопки меняется, чтобы показать выбранный канал.</li>
      <li>Активная вкладка (ТВ, Радио или Игры) подсвечена цветом (темно-синий по умолчанию или заданный).</li>
      <li>Игры запускаются в отдельном окне с возможностью управления его размером и полноэкранным режимом.</li>
      <li>Список радиостанций и игр прокручивается с кастомным цветным скроллбаром для удобства навигации.</li>
    </ul>
    <button id="close-help">Закрыть</button>
  </div>
</div>
<footer> ТВ/РАДИО/ИГРЫ — Придумал, сделал. MUZER play.</footer>
<script>
  const RADIO_CHANNELS = [
    { name: "Авторадио Дискотека СССР", url: "https://pub0302.101.ru:8000/stream/pro/aac/64/144?" },
    { name: "Диско-радио SOVA", url: "https://evcast.mediacp.eu:1965/stream" },
    { name: "Европа плюс", url: "https://ep256.hostingradio.ru:8052/europaplus256.mp3" },
    { name: "Радио Рекорд", url: "https://radiorecord.hostingradio.ru/rr_main96.aacp" },
    { name: "Наше радио", url: "https://nashe1.hostingradio.ru/nashe-256" },
    { name: "Авторадио", url: "https://pub0101.101.ru/stream/air/aac/64/100" },
    { name: "Радио Energy", url: "https://pub0202.101.ru:8443/stream/air/aac/64/99" },
    { name: "Kiss FM", url: "https://radiopotok2.online/http://online.kissfm.ua/KissFM_HD" },
    { name: "Record Remix", url: "https://radiorecord.hostingradio.ru/rmx96.aacp" },
    { name: "Remix FM", url: "https://rmx.amgradio.ru/RemixFM?r_bells" },
    { name: "DFM Remake", url: "https://dfm-remake.hostingradio.ru/remake96.aacp" },
    { name: "Radio Caprice Progressive Power Metal", url: "https://radiopotok2.online/http://79.111.119.111:8000/progpowermetal" },
    { name: "Record Mashup", url: "https://radiorecord.hostingradio.ru/mashup96.aacp" },
    { name: "Радио Солянка Stream", url: "https://radiopotok2.online/http://lexxya.ru:8000/64" },
    { name: "Radio Caprice Progressive Heavy Metal", url: "https://radiopotok2.online/http://213.141.131.10:8000/progheavy" },
    { name: "Radio Sharmanka Retro", url: "https://stream-151.zeno.fm/gexddkd22dsvv" },
    { name: "MixaDance FM Relax", url: "https://stream.mixadance.fm/relax" },
    { name: "Radio Free Music (RFM)", url: "https://radio-holding.ru:9433/rfm" },
    { name: "GRELLA Radio", url: "https://listen6.myradio24.com/grella" },
    { name: "Rock FM: Progressive", url: "https://jfm1.hostingradio.ru:14536/prog.mp3" },
    { name: "Record Gold", url: "https://radiorecord.hostingradio.ru/gold96.aacp" },
    { name: "Record Русская Зима", url: "https://radiorecord.hostingradio.ru/ruszima96.aacp" },
    { name: "Record Eurodance", url: "https://radiorecord.hostingradio.ru/eurodance96.aacp" },
    { name: "Record TOP 100 EDM", url: "https://radiorecord.hostingradio.ru/top100edm96.aacp" },
    { name: "Record Technopop", url: "https://radiorecord.hostingradio.ru/technopop96.aacp" },
    { name: "Record Nu Dance", url: "https://radiorecord.hostingradio.ru/nudance96.aacp" },
    { name: "Record TranceHouse", url: "https://radiorecord.hostingradio.ru/trancehouse96.aacp" },
    { name: "Record Big Hits", url: "https://radiorecord.hostingradio.ru/bighits96.aacp" },
    { name: "Record Tech House", url: "https://radiorecord.hostingradio.ru/techouse96.aacp" },
    { name: "REAL FM FRESH", url: "https://realfm.net/fresh" }
  ];

  const GAMES = [
    { name: "Gary's World", url: "https://html5.gamemonetize.co/dd5rs8etri5hw51g32sk69qfdoov5tq2/" },
    { name: "Crazy Ball Adventures", url: "https://www.onlinegames.io/games/2021/unity2/crazy-ball-adventures/index.html" },
    { name: "Subway Horror Chapter 1", url: "https://www.gamenora.com/embed/subway-horror-chapter-1" },
    { name: "A Difficult Game About Climbing", url: "https://www.gamenora.com/embed/a-difficult-game-about-climbing" },
    { name: "Cross The Road", url: "https://www.onlinegames.io/games/2023/unity/cross-the-road/index.html" },
    { name: "Motorcycle Racer", url: "https://s3.eponesh.com/games/8866/" },
    { name: "Moto Rider GO", url: "https://app-165758.games.s3.yandex.net/165758/ghtg4xyuxt09og6gtji0jcl6aw8el4w4/index.html" },
    { name: "Motorbike Traffic", url: "https://www.onlinegames.io/games/2021/unity/motorbike-traffic/index.html" },
    { name: "Turbo Moto Racer 3D", url: "https://www.gamenora.com/splash/turbo-moto-racer-3d/" },
    { name: "ATV Highway Traffic", url: "https://www.onlinegames.io/games/2021/unity/atv-highway-traffic/index.html" },
    { name: "Traffic Tour", url: "https://traffictour.github.io/traffic-tour/" }
  ];

  const btnTV = document.getElementById('btn-tv');
  const btnRadio = document.getElementById('btn-radio');
  const btnGames = document.getElementById('btn-games');
  const tvContainer = document.getElementById('tv-iframe-container');
  const radioPlayer = document.getElementById('radio-player');
  const radioAudio = document.getElementById('radio-audio');
  const channelsDiv = document.getElementById('channels');
  const gamesOverlay = document.getElementById('games-overlay');
  const gamesList = document.getElementById('games-list');
  const gameWindow = document.getElementById('game-window');
  const gameIframe = document.getElementById('game-iframe');
  const gameTitle = document.getElementById('game-title');
  const minimizeBtn = document.getElementById('minimize-btn');
  const restoreBtn = document.getElementById('restore-btn');
  const fsEnter = document.getElementById('fs-enter');
  const fsExit = document.getElementById('fs-exit');
  const closeGameBtn = document.getElementById('close-game-btn');
  const helpBtn = document.getElementById('help-main-btn');
  const helpModal = document.getElementById('help-modal');
  const closeHelp = document.getElementById('close-help');
  let selectedChannelUrl = null;

  function setActiveButton(button){
    [btnTV, btnRadio, btnGames].forEach(b => b.classList.toggle('active', b === button));
  }
  btnTV.addEventListener('click', () => {
    setActiveButton(btnTV);
    tvContainer.style.display = 'block';
    radioPlayer.style.display = 'none';
    gamesOverlay.style.display = 'none';
    radioAudio.pause();
    radioAudio.src = '';
    closeGame();
  });
  btnRadio.addEventListener('click', () => {
    setActiveButton(btnRadio);
    radioPlayer.style.display = 'flex';
    tvContainer.style.display = 'none';
    gamesOverlay.style.display = 'none';
    // Не запускаем радио автоматически
  });
  btnGames.addEventListener('click', () => {
    setActiveButton(btnGames);
    gamesOverlay.style.display = 'flex';
    tvContainer.style.display = 'none';
    radioPlayer.style.display = 'none';
    radioAudio.pause();
    radioAudio.src = '';
  });

  function renderChannels() {
    channelsDiv.innerHTML = '';
    RADIO_CHANNELS.forEach((ch, idx) => {
      const btn = document.createElement('button');
      btn.className = 'channel';
      btn.textContent = `${idx + 1}. ${ch.name}`;
      btn.title = ch.name;
      btn.addEventListener('click', () => selectChannel(ch));
      btn.dataset.url = ch.url;
      channelsDiv.appendChild(btn);
    });
  }
  function renderGames() {
    gamesList.innerHTML = '';
    GAMES.forEach((g, idx) => {
      const btn = document.createElement('button');
      btn.className = 'game-item';
      btn.textContent = `${idx + 1}. ${g.name}`;
      btn.title = g.name;
      btn.addEventListener('click', () => openGame(g));
      gamesList.appendChild(btn);
    });
  }
  function selectChannel(channel) {
    selectedChannelUrl = channel.url;
    Array.from(channelsDiv.children).forEach(btn =>
      btn.classList.toggle('selected', btn.dataset.url === channel.url)
    );
    radioAudio.src = channel.url;
    // Не автозапуск - ждем действия пользователя
  }
  function openGame(game) {
    gameTitle.textContent = game.name;
    gameIframe.src = game.url;
    gameWindow.style.display = 'block';
    gameWindow.setAttribute('aria-hidden', 'false');
    gameWindow.classList.remove('minimized','fullscreen');
    restoreBtn.style.display = 'none';
    minimizeBtn.style.display = 'inline-block';
    fsEnter.style.display = 'inline-block';
    fsExit.style.display = 'none';
  }
  minimizeBtn.addEventListener('click', () => {
    gameWindow.classList.add('minimized');
    minimizeBtn.style.display = 'none';
    restoreBtn.style.display = 'inline-block';
  });
  restoreBtn.addEventListener('click', () => {
    gameWindow.classList.remove('minimized');
    restoreBtn.style.display = 'none';
    minimizeBtn.style.display = 'inline-block';
  });
  fsEnter.addEventListener('click', async () => {
    if (gameWindow.requestFullscreen) {
      try {
        await gameWindow.requestFullscreen();
        gameWindow.classList.add('fullscreen');
        fsEnter.style.display = 'none';
        fsExit.style.display = 'inline-block';
      } catch {}
    } else {
      gameWindow.classList.add('fullscreen');
      fsEnter.style.display = 'none';
      fsExit.style.display = 'inline-block';
    }
  });
  fsExit.addEventListener('click', async () => {
    if (document.fullscreenElement) {
      try {
        await document.exitFullscreen();
        gameWindow.classList.remove('fullscreen');
        fsEnter.style.display = 'inline-block';
        fsExit.style.display = 'none';
      } catch {}
    } else {
      gameWindow.classList.remove('fullscreen');
      fsEnter.style.display = 'inline-block';
      fsExit.style.display = 'none';
    }
  });
  closeGameBtn.addEventListener('click', () => {
    closeGame();
  });
  function closeGame() {
    gameWindow.style.display = 'none';
    gameWindow.classList.remove('minimized','fullscreen');
    gameWindow.setAttribute('aria-hidden', 'true');
    try { gameIframe.src = ''; } catch {}
  }
  helpBtn.addEventListener('click', () => {
    helpModal.style.display = 'flex';
  });
  closeHelp.addEventListener('click', () => {
    helpModal.style.display = 'none';
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === '1') btnTV.click();
    if (e.key === '2') btnRadio.click();
    if (e.key === '3') btnGames.click();
    if (e.key === 'Escape') {
      closeGame();
      helpModal.style.display = 'none';
      if (gamesOverlay.style.display === 'flex') gamesOverlay.style.display = 'none';
    }
  });

  // При загрузке показываем Радио вкладку с выбранным списком, без автозапуска
  window.addEventListener('DOMContentLoaded', () => {
    btnRadio.classList.add('active');
    radioPlayer.style.display = 'flex';
    tvContainer.style.display = 'none';
    gamesOverlay.style.display = 'none';
    renderChannels();
    renderGames();
  });
</script>
</body>
</html>
