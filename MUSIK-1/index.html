<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VK Mini App Audio Example</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    img { border-radius: 50%; margin-bottom: 10px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 10px; }
    audio { margin-top: 10px; display: block; }
  </style>
</head>
<body>
  <h1>VK Mini App Audio Example</h1>
  <div id="user-info"></div>
  <div id="player"></div>

  <!-- VK Bridge -->
  <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
  <script>
    (async () => {
      try {
        // Инициализация VK Mini App
        await vkBridge.send('VKWebAppInit');
        console.log('VK Bridge инициализирован');

        // Получаем информацию о пользователе
        const user = await vkBridge.send('VKWebAppGetUserInfo');
        console.log(user);

        const userDiv = document.getElementById('user-info');
        userDiv.innerHTML = `
          <img src="${user.photo_200}" width="100" height="100">
          <p>${user.first_name} ${user.last_name}</p>
        `;

        // Добавляем кнопку для проигрывания аудио (пример с публичной ссылкой)
        const playerDiv = document.getElementById('player');
        const btn = document.createElement('button');
        btn.textContent = "Воспроизвести аудио";
        btn.onclick = () => {
          const audio = document.createElement('audio');
          audio.controls = true;
          audio.src = "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"; // публичный трек
          playerDiv.appendChild(audio);
        };
        playerDiv.appendChild(btn);

      } catch (e) {
        console.warn('Ошибка VK Bridge:', e);
      }
    })();
  </script>
</body>
</html>
